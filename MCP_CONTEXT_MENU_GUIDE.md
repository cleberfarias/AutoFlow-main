# ğŸ”Œ Guia: Menu de Contexto MCP

## âœ… Implementado com Sucesso!

A **OpÃ§Ã£o 3: Menu de Contexto** foi completamente integrada ao seu sistema AutoFlow!

---

## ğŸ¯ Como Usar

### 1ï¸âƒ£ **Abrir o Menu de Contexto**

No canvas do workflow, **clique com o botÃ£o direito** em qualquer Ã¡rea vazia:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚         [CANVAS DO WORKFLOW]         â”‚
â”‚                                      â”‚
â”‚              ğŸ‘† (BotÃ£o Direito)     â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Adicionar Node       â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ âš¡ Gatilho           â”‚           â”‚
â”‚  â”‚ âš™ï¸  AÃ§Ã£o             â”‚           â”‚
â”‚  â”‚ ğŸ“Š Dados             â”‚           â”‚
â”‚  â”‚ ğŸ§  LÃ³gica            â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ ğŸ”Œ MCP Integration   â”‚ â† NOVO!  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2ï¸âƒ£ **Selecionar "ğŸ”Œ MCP Integration"**

Ao clicar na opÃ§Ã£o **MCP Integration**, abrirÃ¡ um modal com 3 etapas:

#### **Etapa 1: Escolher ServiÃ§o**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Selecionar ServiÃ§o MCP                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  ğŸ’³ Stripe          ğŸ“§ SendGrid            â”‚
â”‚  ğŸ“± Twilio          ğŸ¯ HubSpot             â”‚
â”‚  ğŸ« Zendesk         ğŸ“… Google Calendar     â”‚
â”‚  ğŸ“ DocuSign        âœï¸  Clicksign          â”‚
â”‚  ğŸ“Š RD Station      ğŸ’° Pagar.me            â”‚
â”‚  âš–ï¸  Advbox          ğŸƒ MongoDB            â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **Etapa 2: Escolher AÃ§Ã£o**
Exemplo para **Stripe**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AÃ§Ãµes DisponÃ­veis - Stripe                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  â€¢ createCheckout  - Criar Checkout         â”‚
â”‚  â€¢ createPaymentIntent - Criar Pagamento    â”‚
â”‚  â€¢ createCustomer - Criar Cliente           â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **Etapa 3: Configurar ParÃ¢metros**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Configurar ParÃ¢metros                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  amount: {{total}}                          â”‚
â”‚  currency: BRL                              â”‚
â”‚  customer_email: {{user.email}}             â”‚
â”‚                                             â”‚
â”‚  [Confirmar]                                â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3ï¸âƒ£ **Node MCP Criado no Canvas**

O node serÃ¡ criado **exatamente onde vocÃª clicou com o botÃ£o direito**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ ğŸ’³  STRIPE                      â”‚          â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚          â”‚
â”‚   â”‚                                 â”‚          â”‚
â”‚   â”‚ Stripe                          â”‚          â”‚
â”‚   â”‚ Criar Checkout                  â”‚          â”‚
â”‚   â”‚                                 â”‚          â”‚
â”‚   â”‚ [âš™ï¸ Editar]  [ğŸ—‘ï¸ Deletar]      â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CaracterÃ­sticas do Node MCP:**
- âœ… **Emoji do serviÃ§o** (ğŸ’³ Stripe, ğŸ“§ SendGrid, etc.)
- âœ… **Cor especÃ­fica** do serviÃ§o (azul #635BFF para Stripe)
- âœ… **Badge "MCP"** indicando integraÃ§Ã£o
- âœ… **Badge do serviÃ§o** (STRIPE, TWILIO, etc.)
- âœ… **TÃ­tulo e descriÃ§Ã£o** da aÃ§Ã£o

---

## ğŸ¨ Cores e Emojis por ServiÃ§o

| ServiÃ§o | Emoji | Cor |
|---------|-------|-----|
| **Stripe** | ğŸ’³ | #635BFF (Azul) |
| **SendGrid** | ğŸ“§ | #1A82E2 (Azul) |
| **Twilio** | ğŸ“± | #F22F46 (Vermelho) |
| **HubSpot** | ğŸ¯ | #FF7A59 (Laranja) |
| **Zendesk** | ğŸ« | #03363D (Verde escuro) |
| **Google Calendar** | ğŸ“… | #4285F4 (Azul Google) |
| **DocuSign** | ğŸ“ | #FFD200 (Amarelo) |
| **Clicksign** | âœï¸ | #FF6B00 (Laranja) |
| **RD Station** | ğŸ“Š | #F15A24 (Laranja) |
| **Pagar.me** | ğŸ’° | #65A300 (Verde) |
| **Advbox** | âš–ï¸ | #1E3A8A (Azul escuro) |
| **MongoDB** | ğŸƒ | #00ED64 (Verde) |

---

## ğŸš€ Funcionalidades Implementadas

### âœ… **Menu de Contexto**
- BotÃ£o direito no canvas abre menu
- OpÃ§Ãµes para todos os tipos de nodes
- Destaque especial para MCP Integration
- Fecha automaticamente ao clicar fora

### âœ… **Modal MCP Selector**
- 3 etapas intuitivas
- SeleÃ§Ã£o visual de serviÃ§os
- Lista de aÃ§Ãµes disponÃ­veis por serviÃ§o
- Editor de parÃ¢metros JSON

### âœ… **RenderizaÃ§Ã£o de Nodes MCP**
- Emojis especÃ­ficos por serviÃ§o
- Cores personalizadas
- Badges informativos
- Visual consistente com o design

### âœ… **Posicionamento Inteligente**
- Node criado onde vocÃª clicou
- Snap automÃ¡tico para grid
- MantÃ©m coordenadas do canvas

---

## ğŸ’¡ Exemplos de Uso

### **Exemplo 1: Criar Checkout Stripe**
1. BotÃ£o direito no canvas â†’ **ğŸ”Œ MCP Integration**
2. Selecionar **ğŸ’³ Stripe**
3. Escolher **createCheckout**
4. Configurar:
   ```json
   {
     "amount": "{{total}}",
     "currency": "BRL",
     "success_url": "https://seu-site.com/sucesso"
   }
   ```
5. âœ… Node criado no canvas!

### **Exemplo 2: Enviar WhatsApp com Twilio**
1. BotÃ£o direito â†’ **ğŸ”Œ MCP Integration**
2. **ğŸ“± Twilio** â†’ **sendWhatsApp**
3. ParÃ¢metros:
   ```json
   {
     "to": "{{user.phone}}",
     "message": "OlÃ¡! Sua automaÃ§Ã£o foi ativada."
   }
   ```

### **Exemplo 3: Criar Ticket no Zendesk**
1. BotÃ£o direito â†’ **ğŸ”Œ MCP Integration**
2. **ğŸ« Zendesk** â†’ **createTicket**
3. Configurar:
   ```json
   {
     "subject": "{{issue.title}}",
     "description": "{{issue.description}}",
     "priority": "high"
   }
   ```

---

## ğŸ”§ IntegraÃ§Ã£o com Workflow

### **Conectar Nodes**
Os nodes MCP funcionam como qualquer outro node:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gatilho  â”‚ â”€â”€â”€> â”‚ MCP Node â”‚ â”€â”€â”€> â”‚  AÃ§Ã£o    â”‚
â”‚ Webhook  â”‚      â”‚  Stripe  â”‚      â”‚ Notificarâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Usar VariÃ¡veis**
Os nodes MCP suportam interpolaÃ§Ã£o de variÃ¡veis:
- `{{user.email}}` - Email do usuÃ¡rio
- `{{total}}` - Total do pedido
- `{{order.id}}` - ID do pedido
- `{{previous.output}}` - SaÃ­da do node anterior

---

## ğŸ“Š Estrutura do Node MCP

Quando vocÃª cria um node MCP, ele Ã© salvo com esta estrutura:

```typescript
{
  id: "mcp-1234567890",
  type: "MCP",
  title: "Stripe",
  description: "Criar Checkout",
  params: {
    mcp: {
      service: "stripe",
      action: "createCheckout",
      params: {
        amount: "{{total}}",
        currency: "BRL",
        success_url: "https://..."
      }
    }
  },
  position: { x: 400, y: 300 }
}
```

---

## ğŸ“ Dicas de Uso

1. **Planejamento**: Use o botÃ£o direito prÃ³ximo aos nodes existentes para criar fluxos conectados

2. **VariÃ¡veis**: Configure variÃ¡veis no formato `{{nome}}` para usar dados de nodes anteriores

3. **Testes**: Sempre teste o workflow completo apÃ³s adicionar nodes MCP

4. **OrganizaÃ§Ã£o**: Use grupos para organizar nodes MCP relacionados

5. **DocumentaÃ§Ã£o**: Adicione descriÃ§Ãµes claras em cada node MCP

---

## ğŸ› SoluÃ§Ã£o de Problemas

### **Menu nÃ£o abre?**
- Certifique-se de clicar em Ã¡rea vazia do canvas
- NÃ£o clique sobre nodes existentes

### **Node nÃ£o aparece?**
- Verifique se completou todas as 3 etapas do modal
- Confirme que selecionou um serviÃ§o e aÃ§Ã£o

### **Cores nÃ£o aparecem?**
- Verifique se o nome do serviÃ§o estÃ¡ correto
- Cores sÃ£o aplicadas automaticamente por serviÃ§o

---

## ğŸ“š PrÃ³ximos Passos

Agora que vocÃª tem o menu de contexto funcionando, explore:

1. âœ… **Criar workflows completos** com MCPs
2. âœ… **Testar integraÃ§Ãµes** reais com APIs
3. âœ… **Conectar mÃºltiplos MCPs** em sequÃªncia
4. âœ… **Usar variÃ¡veis** para passar dados entre nodes
5. âœ… **Exportar workflows** para produÃ§Ã£o

---

## ğŸ‰ ConclusÃ£o

O **Menu de Contexto MCP** estÃ¡ 100% funcional! 

**BenefÃ­cios:**
- âš¡ Acesso rÃ¡pido com botÃ£o direito
- ğŸ¯ CriaÃ§Ã£o precisa no local desejado
- ğŸ¨ Visual atraente e informativo
- ğŸ”Œ 12 serviÃ§os disponÃ­veis
- ğŸš€ IntegraÃ§Ã£o perfeita com workflow

**Experimente agora:**
1. Abra qualquer workflow
2. Clique com botÃ£o direito no canvas
3. Selecione **ğŸ”Œ MCP Integration**
4. Crie sua primeira integraÃ§Ã£o!

---

**Desenvolvido com â¤ï¸ para AutoFlow**
